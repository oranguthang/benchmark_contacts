# üìä –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å ‚Äî –±–µ–Ω—á–º–∞—Ä–∫ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–º API –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å PostgreSQL.

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç –¥–≤–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:
- `POST /contacts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `GET /contacts` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

–ë–µ–Ω—á–º–∞—Ä–∫-–∫–ª–∏–µ–Ω—Ç:
- –≤—ã–ø–æ–ª–Ω—è–µ—Ç **1 000 000 POST-–∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –≤—ã–ø–æ–ª–Ω—è–µ—Ç **1 000 000 GET-–∑–∞–ø—Ä–æ—Å–æ–≤** –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —Å—Ö–µ–º–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –∑–∞–º–µ—Ä—è–µ—Ç –æ–±—â–µ–µ –∏ —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üìë API-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### `POST /contacts`

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "external_id": 12345,
  "phone_number": "+1234567890"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "uuid",
  "external_id": 12345,
  "phone_number": "+1234567890",
  "date_created": "ISO datetime",
  "date_updated": "ISO datetime"
}
```

### `GET /contacts`

Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- external_id ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ external_id (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- phone_number ‚Äî —Ñ–∏–ª—å—Ç—Ä –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- limit ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10000, –º–∞–∫—Å–∏–º—É–º 10000)
- offset ‚Äî —Å–º–µ—â–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "uuid",
    "external_id": 12345,
    "phone_number": "+1234567890",
    "date_created": "ISO datetime",
    "date_updated": "ISO datetime"
  }
]
```
## üìà –ë–µ–Ω—á–º–∞—Ä–∫-–∫–ª–∏–µ–Ω—Ç

### –®–∞–≥–∏:

1. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 1 000 000 POST-–∑–∞–ø—Ä–æ—Å–æ–≤:

   - `external_id` ‚Äî —Å–ª—É—á–∞–π–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 1 000 000
   - `phone_number` ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π –≤–∞–ª–∏–¥–Ω—ã–π –Ω–æ–º–µ—Ä –≤ —Ñ–æ—Ä–º–∞—Ç–µ +79999999999
   - –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ `external_id` –∏ `phone_number` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö GET-–∑–∞–ø—Ä–æ—Å–æ–≤.

2. –í—ã–ø–æ–ª–Ω—è–µ—Ç 1 000 000 GET-–∑–∞–ø—Ä–æ—Å–æ–≤:

   - 300 000 –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `phone_number` (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≤ –ë–î)
   - 300 000 –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `external_id` (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –≤ –ë–î)
   - 400 000 –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `external_id` –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ `0 <= external_id <= 100000` (–º–æ–∂–µ—Ç –∫–∞–∫ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å, —Ç–∞–∫ –∏ –Ω–µ—Ç)

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞:

- `limit` = 10000
- `offset` = 0

### –ò–∑–º–µ—Ä—è–µ–º:

- –±—â–µ–µ –≤—Ä–µ–º—è –≤—Å–µ—Ö POST-–∑–∞–ø—Ä–æ—Å–æ–≤
- –±—â–µ–µ –≤—Ä–µ–º—è –≤—Å–µ—Ö GET-–∑–∞–ø—Ä–æ—Å–æ–≤
- —Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–¥–Ω–æ–≥–æ POST-–∑–∞–ø—Ä–æ—Å–∞
- —Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–¥–Ω–æ–≥–æ GET-–∑–∞–ø—Ä–æ—Å–∞

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ python_aiohttp/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îú‚îÄ‚îÄ main.py
‚îÇ       ‚îú‚îÄ‚îÄ models.py
‚îÇ       ‚îú‚îÄ‚îÄ db.py
‚îÇ       ‚îî‚îÄ‚îÄ routes.py
‚îú‚îÄ‚îÄ benchmark_client/
‚îÇ   ‚îî‚îÄ‚îÄ benchmark.py (–±—É–¥–µ—Ç –ø–æ–∑–∂–µ)
‚îî‚îÄ‚îÄ README.md
```

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

1. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:

    ```bash
    docker-compose up --build
    ```

2. (–ü–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞) –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–Ω—á–º–∞—Ä–∫:

    ```bash
    docker-compose run benchmark_client
    ```

## üìå –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- [x] Python (aiohttp)
- [ ] Java (Spring Boot)
- [ ] Golang
- [ ] Rust
- [ ] PHP
- [ ] Node.js
